{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\n/**\r\n * Supabase Admin client using SERVICE_ROLE_KEY.\r\n * USE ONLY ON THE SERVER (Route Handlers, Server Actions).\r\n * This client bypasses RLS.\r\n */\r\nexport function createAdminClient() {\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\r\n\r\n    if (!supabaseUrl || !supabaseServiceKey) {\r\n        throw new Error('[ADMIN] Supabase URL or Service Role Key is missing. Check your environment variables.');\r\n    }\r\n\r\n    return createClient(supabaseUrl || '', supabaseServiceKey || '', {\r\n        auth: {\r\n            autoRefreshToken: false,\r\n            persistSession: false\r\n        }\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,SAAS;IACZ,MAAM;IACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;IAEhE,IAAI,CAAC,eAAe,CAAC,oBAAoB;QACrC,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,IAAA,iRAAY,EAAC,eAAe,IAAI,sBAAsB,IAAI;QAC7D,MAAM;YACF,kBAAkB;YAClB,gBAAgB;QACpB;IACJ;AACJ"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\n/**\r\n * Creates a Supabase client for use in Server Components, Route Handlers, and Server Actions.\r\n * In Next.js 16, cookies() is asynchronous.\r\n */\r\nexport async function createClient() {\r\n    const cookieStore = await cookies()\r\n\r\n    return createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        )\r\n                    } catch {\r\n                        // The `setAll` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing\r\n                        // user sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAMO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,6NAAO;IAEjC,OAAO,IAAA,kRAAkB,sUAGrB;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACrB;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/lib/supabase/error.ts"],"sourcesContent":["/**\r\n * Serializa erros Supabase/Postgrest para logs e respostas JSON.\r\n * Evita \"{}\" no console quando o objeto não é enumerável.\r\n */\r\nexport function serializeSupabaseError(err: unknown): {\r\n    message: string;\r\n    code?: string;\r\n    details?: unknown;\r\n    hint?: string;\r\n    status?: number;\r\n    name?: string;\r\n} {\r\n    if (err == null) return { message: 'Unknown error' };\r\n\r\n    const e = err as Record<string, unknown>;\r\n    return {\r\n        message: typeof e?.message === 'string' ? e.message : String(err),\r\n        code: typeof e?.code === 'string' ? e.code : undefined,\r\n        details: e?.details,\r\n        hint: typeof e?.hint === 'string' ? e.hint : undefined,\r\n        status: typeof e?.status === 'number' ? e.status : undefined,\r\n        name: typeof e?.name === 'string' ? e.name : undefined,\r\n    };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AACM,SAAS,uBAAuB,GAAY;IAQ/C,IAAI,OAAO,MAAM,OAAO;QAAE,SAAS;IAAgB;IAEnD,MAAM,IAAI;IACV,OAAO;QACH,SAAS,OAAO,GAAG,YAAY,WAAW,EAAE,OAAO,GAAG,OAAO;QAC7D,MAAM,OAAO,GAAG,SAAS,WAAW,EAAE,IAAI,GAAG;QAC7C,SAAS,GAAG;QACZ,MAAM,OAAO,GAAG,SAAS,WAAW,EAAE,IAAI,GAAG;QAC7C,QAAQ,OAAO,GAAG,WAAW,WAAW,EAAE,MAAM,GAAG;QACnD,MAAM,OAAO,GAAG,SAAS,WAAW,EAAE,IAAI,GAAG;IACjD;AACJ"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/lib/constants.ts"],"sourcesContent":["/**\n * Constantes do CeluPublic.\n */\n\nexport const APP_NAME = 'CeluPublic';\n\nexport const CONTACT_INFO = {\n  WHATSAPP: '+258 87 833 0517',\n  WHATSAPP_RAW: '258878330517',\n  WHATSAPP_LINK: 'https://wa.me/258878330517?text=Olá!%20Acabei%20de%20fazer%20o%20pagamento%20da%20taxa%20de%2020MT%20para%20ativação%20da%20minha%20conta.%20Pode%20ajudar-me?',\n  EMAIL: 'celupublic@gmail.com',\n  SUPPORT_SEC: 'celupublic@gmail.com',\n} as const;\n\nexport const LIMITS = {\n  MAX_PRODUCTS: 10,\n  MAX_SERVICES: 5,\n  MAX_AD_IMAGES: 5,\n  ACTIVATION_FEE_MT: 20,\n} as const;\n\n/** Províncias de Moçambique (para select no cadastro) */\nexport const PROVINCIAS_MOCAMBIQUE = [\n  'Cabo Delgado',\n  'Gaza',\n  'Inhambane',\n  'Manica',\n  'Maputo',\n  'Maputo Cidade',\n  'Nampula',\n  'Niassa',\n  'Sofala',\n  'Tete',\n  'Zambézia',\n] as const;\n\n/** Cidades por província (para select no anúncio). Province -> cities. */\nexport const CIDADES_POR_PROVINCIA: Record<string, string[]> = {\n  'Cabo Delgado': ['Pemba', 'Montepuez', 'Mocímboa da Praia', 'Chinde'],\n  'Gaza': ['Xai-Xai', 'Chókwè', 'Macia', 'Chibuto'],\n  'Inhambane': ['Inhambane', 'Maxixe', 'Vilanculos', 'Massinga'],\n  'Manica': ['Chimoio', 'Manica', 'Gondola', 'Sussundenga'],\n  'Maputo': ['Matola', 'Boane', 'Manhiça', 'Marracuene', 'Namaacha'],\n  'Maputo Cidade': ['Maputo', 'KaMavota', 'KaMubukwana', 'KaMaxakeni', 'KaMphumo', 'KaTembe', 'KaNyaka'],\n  'Nampula': ['Nampula', 'Nacala', 'Angoche', 'Monapo', 'Mozambique'],\n  'Niassa': ['Lichinga', 'Cuamba', 'Metangula'],\n  'Sofala': ['Beira', 'Dondo', 'Nhamatanda', 'Chibabava'],\n  'Tete': ['Tete', 'Moatize', 'Angónia', 'Zumbo'],\n  'Zambézia': ['Quelimane', 'Mocuba', 'Gurúè', 'Milange', 'Nicoadala'],\n};\n\nexport const PLACEHOLDER_IMAGE = 'https://placehold.co/600x400/e2e8f0/64748b?text=Sem+imagem';\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;AAEM,MAAM,WAAW;AAEjB,MAAM,eAAe;IAC1B,UAAU;IACV,cAAc;IACd,eAAe;IACf,OAAO;IACP,aAAa;AACf;AAEO,MAAM,SAAS;IACpB,cAAc;IACd,cAAc;IACd,eAAe;IACf,mBAAmB;AACrB;AAGO,MAAM,wBAAwB;IACnC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAGM,MAAM,wBAAkD;IAC7D,gBAAgB;QAAC;QAAS;QAAa;QAAqB;KAAS;IACrE,QAAQ;QAAC;QAAW;QAAU;QAAS;KAAU;IACjD,aAAa;QAAC;QAAa;QAAU;QAAc;KAAW;IAC9D,UAAU;QAAC;QAAW;QAAU;QAAW;KAAc;IACzD,UAAU;QAAC;QAAU;QAAS;QAAW;QAAc;KAAW;IAClE,iBAAiB;QAAC;QAAU;QAAY;QAAe;QAAc;QAAY;QAAW;KAAU;IACtG,WAAW;QAAC;QAAW;QAAU;QAAW;QAAU;KAAa;IACnE,UAAU;QAAC;QAAY;QAAU;KAAY;IAC7C,UAAU;QAAC;QAAS;QAAS;QAAc;KAAY;IACvD,QAAQ;QAAC;QAAQ;QAAW;QAAW;KAAQ;IAC/C,YAAY;QAAC;QAAa;QAAU;QAAS;QAAW;KAAY;AACtE;AAEO,MAAM,oBAAoB"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/app/api/vendedor/anuncios/%5Bid%5D/route.ts"],"sourcesContent":["/**\r\n * GET e PATCH /api/vendedor/anuncios/[id]\r\n * Carregar e atualizar anúncio. Valida ownership.\r\n */\r\nimport { NextResponse } from 'next/server'\r\nimport { createAdminClient } from '@/lib/supabase/admin'\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { serializeSupabaseError } from '@/lib/supabase/error'\r\nimport { LIMITS } from '@/lib/constants'\r\n\r\nconst BUCKET = 'ad-images'\r\n\r\nfunction buildPublicUrl(path: string): string {\r\n    const url = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n    if (!url) return ''\r\n    const clean = path.replace(/^\\/+|\\/+$/g, '')\r\n    return `${url}/storage/v1/object/public/${BUCKET}/${clean}`\r\n}\r\n\r\nasync function ensureOwnerOrAdmin(supabase: Awaited<ReturnType<typeof createClient>>, userId: string, ownerId: string) {\r\n    if (userId === ownerId) return true\r\n    const { data } = await supabase.rpc('is_admin', { uid: userId })\r\n    if (data === true) return true\r\n    const { data: p } = await supabase.from('profiles').select('role').eq('id', userId).maybeSingle()\r\n    return p?.role === 'admin'\r\n}\r\n\r\nfunction rowToAd(r: Record<string, unknown>, images: string[], userName?: string) {\r\n    return {\r\n        id: r.id,\r\n        userId: r.owner_id,\r\n        userName: userName ?? undefined,\r\n        type: r.type,\r\n        status: r.status,\r\n        title: r.title,\r\n        description: r.description,\r\n        price: r.price_mzn != null ? Number(r.price_mzn) : null,\r\n        priceOnRequest: r.price_note != null && String(r.price_note).length > 0,\r\n        location: r.city,\r\n        province: r.province,\r\n        neighborhood: r.neighborhood ?? undefined,\r\n        categoryId: r.category,\r\n        whatsapp: r.whatsapp,\r\n        images,\r\n        likes: 0,\r\n        createdAt: r.created_at,\r\n        updatedAt: r.updated_at,\r\n    }\r\n}\r\n\r\nexport const dynamic = 'force-dynamic'\r\n\r\nexport async function GET(\r\n    _request: Request,\r\n    { params }: { params: Promise<{ id: string }> }\r\n) {\r\n    try {\r\n        const { id } = await params\r\n        if (!id) return NextResponse.json({ error: 'id obrigatório' }, { status: 400 })\r\n\r\n        const supabase = await createClient()\r\n        const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n        if (authError || !user) {\r\n            return NextResponse.json({ error: 'Não autenticado' }, { status: 401 })\r\n        }\r\n\r\n        const admin = createAdminClient()\r\n        const { data: adRow, error: adErr } = await admin\r\n            .from('ads')\r\n            .select('*')\r\n            .eq('id', id)\r\n            .maybeSingle()\r\n\r\n        if (adErr || !adRow) {\r\n            return NextResponse.json({ error: 'Anúncio não encontrado' }, { status: 404 })\r\n        }\r\n\r\n        const ownerId = adRow.owner_id as string\r\n        if (!(await ensureOwnerOrAdmin(supabase, user.id, ownerId))) {\r\n            return NextResponse.json({ error: 'Acesso negado' }, { status: 403 })\r\n        }\r\n\r\n        const { data: imgRows } = await admin\r\n            .from('ad_images')\r\n            .select('path, sort_order')\r\n            .eq('ad_id', id)\r\n            .order('sort_order', { ascending: true })\r\n\r\n        const imgs = ((imgRows ?? []) as { path: string; sort_order: number }[])\r\n            .sort((a, b) => a.sort_order - b.sort_order)\r\n            .map((i) => buildPublicUrl(i.path))\r\n\r\n        const { data: profile } = await admin\r\n            .from('profiles')\r\n            .select('full_name')\r\n            .eq('id', ownerId)\r\n            .maybeSingle()\r\n\r\n        const ad = rowToAd(adRow, imgs, (profile as { full_name: string })?.full_name)\r\n        return NextResponse.json(ad)\r\n    } catch (err: unknown) {\r\n        const ser = serializeSupabaseError(err)\r\n        console.error('[API/VENDEDOR/ANUNCIOS/GET] error:', ser)\r\n        return NextResponse.json({ error: ser.message }, { status: 500 })\r\n    }\r\n}\r\n\r\nfunction dataUrlToBuffer(dataUrl: string): { buffer: Buffer; ext: string } {\r\n    const match = dataUrl.match(/^data:image\\/(jpeg|jpg|png|webp|gif);base64,(.+)$/i)\r\n    const base64 = match?.[2] ?? dataUrl.replace(/^data:[^;]+;base64,/, '')\r\n    const mime = match?.[1]?.toLowerCase() ?? 'jpeg'\r\n    const extMap: Record<string, string> = { jpeg: 'jpg', jpg: 'jpg', png: 'png', webp: 'webp', gif: 'gif' }\r\n    const ext = extMap[mime] ?? 'jpg'\r\n    return { buffer: Buffer.from(base64, 'base64'), ext }\r\n}\r\n\r\nexport async function PATCH(\r\n    request: Request,\r\n    { params }: { params: Promise<{ id: string }> }\r\n) {\r\n    try {\r\n        const { id } = await params\r\n        if (!id) return NextResponse.json({ error: 'id obrigatório' }, { status: 400 })\r\n\r\n        const supabase = await createClient()\r\n        const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n        if (authError || !user) {\r\n            return NextResponse.json({ error: 'Não autenticado' }, { status: 401 })\r\n        }\r\n\r\n        const admin = createAdminClient()\r\n        const { data: adRow, error: adErr } = await admin\r\n            .from('ads')\r\n            .select('owner_id')\r\n            .eq('id', id)\r\n            .maybeSingle()\r\n\r\n        if (adErr || !adRow) {\r\n            return NextResponse.json({ error: 'Anúncio não encontrado' }, { status: 404 })\r\n        }\r\n\r\n        const ownerId = adRow.owner_id as string\r\n        if (!(await ensureOwnerOrAdmin(supabase, user.id, ownerId))) {\r\n            return NextResponse.json({ error: 'Acesso negado' }, { status: 403 })\r\n        }\r\n\r\n        const body = await request.json().catch(() => ({}))\r\n        const images = Array.isArray(body?.images) ? body.images : []\r\n        if (images.length > LIMITS.MAX_AD_IMAGES) {\r\n            return NextResponse.json(\r\n                { error: `Máximo ${LIMITS.MAX_AD_IMAGES} imagens permitidas.` },\r\n                { status: 400 }\r\n            )\r\n        }\r\n\r\n        const updates: Record<string, unknown> = { updated_at: new Date().toISOString() }\r\n        if (body?.title != null) updates.title = String(body.title).trim()\r\n        if (body?.description != null) updates.description = String(body.description).trim()\r\n        if (body?.price != null) updates.price_mzn = Number(body.price)\r\n        if (body?.price === null) updates.price_mzn = null\r\n        if (body?.priceOnRequest != null) updates.price_note = body.priceOnRequest ? 'Sob consulta' : null\r\n        if (body?.province != null) updates.province = String(body.province).trim()\r\n        if (body?.city != null || body?.location != null) updates.city = String(body.city ?? body.location ?? '').trim()\r\n        if (body?.neighborhood !== undefined) updates.neighborhood = body.neighborhood?.trim() || null\r\n        if (body?.categoryId != null) updates.category = String(body.categoryId).trim()\r\n        if (body?.whatsapp != null) updates.whatsapp = String(body.whatsapp).replace(/\\D/g, '')\r\n        if (body?.type != null) updates.type = body.type === 'service' ? 'service' : 'product'\r\n        if (body?.status != null) updates.status = body.status\r\n\r\n        if (Object.keys(updates).length > 1) {\r\n            const { error: upErr } = await admin.from('ads').update(updates).eq('id', id)\r\n            if (upErr) {\r\n                const ser = serializeSupabaseError(upErr)\r\n                console.error('[API/VENDEDOR/ANUNCIOS/PATCH] update error:', ser)\r\n                return NextResponse.json({ error: ser.message }, { status: 500 })\r\n            }\r\n        }\r\n\r\n        const baseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL ?? ''\r\n        const urlPrefix = `${baseUrl}/storage/v1/object/public/${BUCKET}/`\r\n\r\n        function urlToPath(url: string): string | null {\r\n            if (typeof url !== 'string' || !url.startsWith('http')) return null\r\n            const idx = url.indexOf(urlPrefix)\r\n            if (idx === -1) return null\r\n            return url.slice(idx + urlPrefix.length).replace(/^\\/+|\\/+$/g, '') || null\r\n        }\r\n\r\n        const pathsToKeep: string[] = []\r\n        const dataUrls: string[] = []\r\n        for (const img of images) {\r\n            if (typeof img === 'string' && img.startsWith('data:')) {\r\n                dataUrls.push(img)\r\n            } else if (typeof img === 'string' && img.startsWith('http')) {\r\n                const p = urlToPath(img)\r\n                if (p) pathsToKeep.push(p)\r\n            }\r\n        }\r\n\r\n        const { data: existing } = await admin.from('ad_images').select('path').eq('ad_id', id)\r\n        const existingPaths = (existing ?? []).map((r: { path: string }) => r.path)\r\n        const pathsToDelete = existingPaths.filter((p) => !pathsToKeep.includes(p))\r\n\r\n        if (pathsToDelete.length > 0) {\r\n            await admin.storage.from(BUCKET).remove(pathsToDelete)\r\n        }\r\n\r\n        const toUpload = dataUrls.slice(0, Math.max(0, LIMITS.MAX_AD_IMAGES - pathsToKeep.length))\r\n        const allPaths: string[] = [...pathsToKeep]\r\n\r\n        for (let i = 0; i < toUpload.length; i++) {\r\n            const dataUrl = toUpload[i]\r\n            try {\r\n                const { buffer, ext } = dataUrlToBuffer(dataUrl)\r\n                const filename = `${crypto.randomUUID()}.${ext}`\r\n                const path = `${user.id}/${id}/${filename}`\r\n                const contentType = ext === 'jpg' ? 'image/jpeg' : `image/${ext}`\r\n\r\n                const { error: uploadErr } = await admin.storage\r\n                    .from(BUCKET)\r\n                    .upload(path, buffer, { contentType, upsert: true })\r\n\r\n                if (uploadErr) continue\r\n                allPaths.push(path)\r\n            } catch (e) {\r\n                console.error('[API/VENDEDOR/ANUNCIOS/PATCH] image upload error:', e)\r\n            }\r\n        }\r\n\r\n        await admin.from('ad_images').delete().eq('ad_id', id)\r\n        for (let i = 0; i < allPaths.length; i++) {\r\n            await admin.from('ad_images').insert({ ad_id: id, path: allPaths[i], sort_order: i })\r\n        }\r\n\r\n        const { data: updated } = await admin.from('ads').select('*').eq('id', id).single()\r\n        const { data: imgRows } = await admin.from('ad_images').select('path, sort_order').eq('ad_id', id).order('sort_order', { ascending: true })\r\n        const imgs = ((imgRows ?? []) as { path: string; sort_order: number }[])\r\n            .sort((a, b) => a.sort_order - b.sort_order)\r\n            .map((i) => buildPublicUrl(i.path))\r\n\r\n        const ad = rowToAd(updated ?? {}, imgs)\r\n        return NextResponse.json(ad)\r\n    } catch (err: unknown) {\r\n        const ser = serializeSupabaseError(err)\r\n        console.error('[API/VENDEDOR/ANUNCIOS/PATCH] error:', ser)\r\n        return NextResponse.json({ ok: false, message: ser.message }, { status: 500 })\r\n    }\r\n}\r\n\r\n/**\r\n * DELETE /api/vendedor/anuncios/[id]\r\n * Só owner ou admin. Remove ad_images (rows + storage) e depois ads.\r\n */\r\nexport async function DELETE(\r\n    request: Request,\r\n    { params }: { params: Promise<{ id: string }> }\r\n) {\r\n    const { id } = await params\r\n    console.log('========================================');\r\n    console.log('[API/SELLER/ADS/DELETE] REQUEST RECEBIDA');\r\n    console.log('[API/SELLER/ADS/DELETE] adId=', id ?? 'undefined');\r\n    console.log('[API/SELLER/ADS/DELETE] method=', request.method);\r\n    console.log('[API/SELLER/ADS/DELETE] url=', request.url);\r\n    console.log('========================================');\r\n    try {\r\n        if (!id) {\r\n            console.error('[API/SELLER/ADS/DELETE] fail adId=missing code=MISSING_ID message=id obrigatório')\r\n            return NextResponse.json({ ok: false, message: 'id obrigatório', code: 'MISSING_ID' }, { status: 400 })\r\n        }\r\n\r\n        const supabase = await createClient()\r\n        const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n\r\n        if (authError || !user) {\r\n            console.error('[API/SELLER/ADS/DELETE] fail adId=', id, 'code=UNAUTHORIZED message=', authError?.message ?? 'Não autenticado')\r\n            return NextResponse.json({ ok: false, message: 'Não autenticado', code: 'UNAUTHORIZED' }, { status: 401 })\r\n        }\r\n\r\n        const admin = createAdminClient()\r\n        const { data: adRow, error: adErr } = await admin\r\n            .from('ads')\r\n            .select('owner_id')\r\n            .eq('id', id)\r\n            .maybeSingle()\r\n\r\n        if (adErr) {\r\n            const ser = serializeSupabaseError(adErr)\r\n            console.error('[API/SELLER/ADS/DELETE] select ad error:', ser.message, ser.code)\r\n            return NextResponse.json({ ok: false, message: ser.message ?? 'Erro ao verificar anúncio', code: ser.code }, { status: 500 })\r\n        }\r\n        if (!adRow) {\r\n            console.error('[API/SELLER/ADS/DELETE] fail adId=', id, 'code=NOT_FOUND message=Anúncio não encontrado')\r\n            return NextResponse.json({ ok: false, message: 'Anúncio não encontrado', code: 'NOT_FOUND' }, { status: 404 })\r\n        }\r\n\r\n        const ownerId = adRow.owner_id as string\r\n        if (!(await ensureOwnerOrAdmin(supabase, user.id, ownerId))) {\r\n            console.error('[API/SELLER/ADS/DELETE] fail adId=', id, 'code=FORBIDDEN message=Acesso negado')\r\n            return NextResponse.json({ ok: false, message: 'Acesso negado. Só o dono do anúncio ou um administrador pode apagá-lo.', code: 'FORBIDDEN' }, { status: 403 })\r\n        }\r\n\r\n        // 1) Paths das imagens para apagar do storage\r\n        const { data: imgRows } = await admin.from('ad_images').select('path').eq('ad_id', id)\r\n        const paths = (imgRows ?? []).map((r: { path: string }) => r.path)\r\n\r\n        // 2) Remover ficheiros do bucket (não falhar se ficheiro não existir)\r\n        if (paths.length > 0) {\r\n            const { error: storageErr } = await admin.storage.from(BUCKET).remove(paths)\r\n            if (storageErr) {\r\n                console.warn('[API/SELLER/ADS/DELETE] storage remove (non-fatal):', storageErr.message, 'paths:', paths.length)\r\n            }\r\n        }\r\n\r\n        // 3) Apagar linhas ad_images (antes do ad por FK)\r\n        const { error: delImgErr } = await admin.from('ad_images').delete().eq('ad_id', id)\r\n        if (delImgErr) {\r\n            const ser = serializeSupabaseError(delImgErr)\r\n            console.error('[API/SELLER/ADS/DELETE] delete ad_images error:', ser.message)\r\n            return NextResponse.json({ ok: false, message: ser.message ?? 'Erro ao apagar imagens', code: 'DB_ERROR' }, { status: 500 })\r\n        }\r\n\r\n        // 4) Apagar linha do anúncio\r\n        const { error: delAdErr } = await admin.from('ads').delete().eq('id', id)\r\n        if (delAdErr) {\r\n            const ser = serializeSupabaseError(delAdErr)\r\n            console.error('[API/SELLER/ADS/DELETE] delete ads error:', ser.message)\r\n            return NextResponse.json({ ok: false, message: ser.message ?? 'Erro ao apagar anúncio', code: 'DB_ERROR' }, { status: 500 })\r\n        }\r\n\r\n        console.log('[API/SELLER/ADS/DELETE] ok adId=', id, 'images=', paths.length)\r\n        return NextResponse.json({ ok: true })\r\n    } catch (err: unknown) {\r\n        const ser = serializeSupabaseError(err)\r\n        console.error('[API/SELLER/ADS/DELETE] fail adId=', id, 'code=INTERNAL message=', ser.message, 'details=', ser.code ?? '')\r\n        return NextResponse.json({ ok: false, message: ser.message ?? 'Erro ao eliminar anúncio', code: 'INTERNAL' }, { status: 500 })\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}