{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/components/dashboard/DashboardLayout.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { Menu, X, LogOut, ChevronRight, type LucideIcon } from 'lucide-react';\nimport { useAuth } from '@/components/providers/AuthProvider';\nimport { AppButton } from '@/components/ui/app-button';\nimport { cn } from '@/lib/utils';\nimport { APP_NAME } from '@/lib/constants';\n\n// We'll use a placeholder for the logo if logoPng is not easily accessible via import\n// Actually, it was moved to assets/logo.png.\nconst logoPath = '/assets/logo.png';\n\nexport type DashboardNavItem = {\n  path: string;\n  label: string;\n  icon: LucideIcon;\n};\n\ntype DashboardLayoutProps = {\n  role: 'admin' | 'seller';\n  navItems: DashboardNavItem[];\n  basePath: string;\n  children?: React.ReactNode;\n};\n\nexport function DashboardLayout({ navItems, basePath, children }: DashboardLayoutProps) {\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const pathname = usePathname();\n  const router = useRouter();\n  const { user, logout } = useAuth();\n\n  const handleLogout = async () => {\n    await logout();\n    router.push('/');\n  };\n\n  const currentLabel = navItems.find((i) =>\n    i.path === basePath\n      ? pathname === basePath\n      : pathname.startsWith(i.path)\n  )?.label ?? 'Painel';\n\n  const sidebarContent = (\n    <>\n      <div className=\"flex h-14 items-center justify-between border-b px-4\">\n        <Link\n          href={basePath}\n          className=\"flex items-center focus:outline-none\"\n          onClick={() => setMobileOpen(false)}\n        >\n          {/* Use standard img tag for simplicity or Next Image if preferred */}\n          <img\n            src={logoPath}\n            alt={APP_NAME}\n            className=\"h-9 w-auto rounded object-contain sm:h-10\"\n          />\n        </Link>\n        <div className=\"flex items-center gap-1\">\n          <AppButton\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"hidden shrink-0 sm:flex\"\n            aria-label={sidebarOpen ? 'Recolher menu' : 'Expandir menu'}\n          >\n            {sidebarOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\n          </AppButton>\n          <AppButton\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setMobileOpen(false)}\n            className=\"sm:hidden\"\n            aria-label=\"Fechar menu\"\n          >\n            <X className=\"h-5 w-5\" />\n          </AppButton>\n        </div>\n      </div>\n      <nav className=\"flex-1 space-y-1 overflow-y-auto p-2\">\n        {navItems.map((item) => {\n          const isActive =\n            item.path === basePath\n              ? pathname === basePath\n              : pathname.startsWith(item.path);\n          return (\n            <Link\n              key={item.path}\n              href={item.path}\n              onClick={() => setMobileOpen(false)}\n              className={cn(\n                'flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-colors',\n                isActive\n                  ? 'bg-primary text-primary-foreground'\n                  : 'text-muted-foreground hover:bg-muted hover:text-foreground'\n              )}\n            >\n              <item.icon className=\"h-5 w-5 shrink-0\" />\n              {sidebarOpen && <span>{item.label}</span>}\n              {sidebarOpen && isActive && <ChevronRight className=\"ml-auto h-4 w-4\" />}\n            </Link>\n          );\n        })}\n      </nav>\n      <div className=\"border-t p-2\">\n        {sidebarOpen && (\n          <div className=\"rounded-lg bg-muted/50 px-3 py-2\">\n            <p className=\"truncate text-xs font-medium\">{user?.name}</p>\n            <p className=\"truncate text-xs text-muted-foreground\">{user?.email}</p>\n          </div>\n        )}\n        <AppButton\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"mt-2 w-full justify-start gap-2 text-muted-foreground\"\n          onClick={handleLogout}\n        >\n          <LogOut className=\"h-4 w-4\" />\n          {sidebarOpen && 'Sair'}\n        </AppButton>\n      </div>\n    </>\n  );\n\n  return (\n    <div className=\"flex h-screen bg-muted/30 overflow-hidden\">\n      {/* Desktop sidebar */}\n      <aside\n        className={cn(\n          'hidden flex-col border-r bg-card transition-all duration-300 sm:flex',\n          sidebarOpen ? 'w-64' : 'w-20'\n        )}\n      >\n        {sidebarContent}\n      </aside>\n\n      {/* Mobile drawer overlay */}\n      {mobileOpen && (\n        <div\n          className=\"fixed inset-0 z-50 bg-black/50 sm:hidden\"\n          onClick={() => setMobileOpen(false)}\n          aria-hidden\n        />\n      )}\n      <aside\n        className={cn(\n          'fixed inset-y-0 left-0 z-50 flex w-64 flex-col border-r bg-card transition-transform duration-300 sm:hidden',\n          mobileOpen ? 'translate-x-0' : '-translate-x-full'\n        )}\n      >\n        {sidebarContent}\n      </aside>\n\n      <div className=\"flex min-w-0 flex-1 flex-col overflow-hidden\">\n        <header className=\"flex h-14 shrink-0 items-center gap-4 border-b bg-card px-4 sm:px-6\">\n          <AppButton\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"sm:hidden\"\n            onClick={() => setMobileOpen(true)}\n            aria-label=\"Abrir menu\"\n          >\n            <Menu className=\"h-5 w-5\" />\n          </AppButton>\n          <h1 className=\"min-w-0 truncate text-lg font-semibold\">{currentLabel}</h1>\n          <Link\n            href=\"/\"\n            className=\"ml-auto shrink-0 text-sm text-muted-foreground hover:text-foreground\"\n          >\n            Ver site →\n          </Link>\n        </header>\n        <main className=\"flex-1 overflow-y-auto overflow-x-hidden bg-muted/20 p-4 sm:p-6\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/components/providers/RoleGuard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/components/providers/AuthProvider';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface RoleGuardProps {\r\n    children: React.ReactNode;\r\n    allowedRoles?: ('admin' | 'seller')[];\r\n    requireApproved?: boolean;\r\n}\r\n\r\nexport function RoleGuard({ children, allowedRoles, requireApproved = false }: RoleGuardProps) {\r\n    const { user, isAdmin, isApprovedSeller, isPending, authStatus, profileStatus } = useAuth();\r\n    const router = useRouter();\r\n\r\n    const isLoading = authStatus === 'booting' || authStatus === 'authenticating' || profileStatus === 'loading';\r\n\r\n    useEffect(() => {\r\n        if (isLoading) return;\r\n\r\n        if (!user) {\r\n            router.push('/entrar');\r\n            return;\r\n        }\r\n\r\n        if (allowedRoles) {\r\n            if (allowedRoles.includes('admin') && isAdmin) return;\r\n            if (allowedRoles.includes('seller') && (isApprovedSeller || isPending)) {\r\n                if (requireApproved && !isApprovedSeller) {\r\n                    router.push('/ativacao');\r\n                }\r\n                return;\r\n            }\r\n\r\n            // If none of the allowed role conditions are met\r\n            router.push('/');\r\n        }\r\n    }, [user, isAdmin, isApprovedSeller, isPending, isLoading, allowedRoles, requireApproved, router]);\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex min-h-[60vh] items-center justify-center p-6\">\r\n                <Card className=\"w-full max-w-md border-none shadow-none text-center\">\r\n                    <CardContent className=\"pt-6\">\r\n                        <Loader2 className=\"h-10 w-10 animate-spin mx-auto text-primary mb-4\" />\r\n                        <p className=\"text-muted-foreground\">Verificando permissões...</p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) return null;\r\n\r\n    if (allowedRoles) {\r\n        const hasAdmin = allowedRoles.includes('admin') && isAdmin;\r\n        const hasSeller = allowedRoles.includes('seller') && (isApprovedSeller || isPending);\r\n\r\n        if (!hasAdmin && !hasSeller) return null;\r\n        if (requireApproved && allowedRoles.includes('seller') && !isApprovedSeller && !isAdmin) return null;\r\n    }\r\n\r\n    return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAcO,SAAS,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAE,kBAAkB,KAAK,EAAkB;IACzF,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,gBAAgB,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,IAAA,oOAAO;IACzF,MAAM,SAAS,IAAA,gOAAS;IAExB,MAAM,YAAY,eAAe,aAAa,eAAe,oBAAoB,kBAAkB;IAEnG,IAAA,mSAAS,EAAC;QACN,IAAI,WAAW;QAEf,IAAI,CAAC,MAAM;YACP,OAAO,IAAI,CAAC;YACZ;QACJ;QAEA,IAAI,cAAc;YACd,IAAI,aAAa,QAAQ,CAAC,YAAY,SAAS;YAC/C,IAAI,aAAa,QAAQ,CAAC,aAAa,CAAC,oBAAoB,SAAS,GAAG;gBACpE,IAAI,mBAAmB,CAAC,kBAAkB;oBACtC,OAAO,IAAI,CAAC;gBAChB;gBACA;YACJ;YAEA,iDAAiD;YACjD,OAAO,IAAI,CAAC;QAChB;IACJ,GAAG;QAAC;QAAM;QAAS;QAAkB;QAAW;QAAW;QAAc;QAAiB;KAAO;IAEjG,IAAI,WAAW;QACX,qBACI,+TAAC;YAAI,WAAU;sBACX,cAAA,+TAAC,kNAAI;gBAAC,WAAU;0BACZ,cAAA,+TAAC,yNAAW;oBAAC,WAAU;;sCACnB,+TAAC,6SAAO;4BAAC,WAAU;;;;;;sCACnB,+TAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;IAKzD;IAEA,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI,cAAc;QACd,MAAM,WAAW,aAAa,QAAQ,CAAC,YAAY;QACnD,MAAM,YAAY,aAAa,QAAQ,CAAC,aAAa,CAAC,oBAAoB,SAAS;QAEnF,IAAI,CAAC,YAAY,CAAC,WAAW,OAAO;QACpC,IAAI,mBAAmB,aAAa,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,SAAS,OAAO;IACpG;IAEA,qBAAO;kBAAG;;AACd"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/app/admin/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { LayoutDashboard, Users, Package, Layers, Image, CheckCircle } from 'lucide-react';\r\nimport { DashboardLayout } from '@/components/dashboard/DashboardLayout';\r\n\r\nimport { RoleGuard } from '@/components/providers/RoleGuard';\r\n\r\nexport default function AdminRootLayout({ children }: { children: React.ReactNode }) {\r\n    return (\r\n        <RoleGuard allowedRoles={['admin']}>\r\n            <DashboardLayout\r\n                role=\"admin\"\r\n                navItems={[\r\n                    { path: '/admin', label: 'Visão geral', icon: LayoutDashboard },\r\n                    { path: '/admin/usuarios', label: 'Utilizadores', icon: Users },\r\n                    { path: '/admin/solicitacoes', label: 'Solicitações', icon: CheckCircle },\r\n                    { path: '/admin/anuncios', label: 'Anúncios', icon: Package },\r\n                    { path: '/admin/categorias', label: 'Categorias', icon: Layers },\r\n                    { path: '/admin/banners', label: 'Banners', icon: Image },\r\n                ]}\r\n                basePath=\"/admin\"\r\n            >\r\n                {children}\r\n            </DashboardLayout>\r\n        </RoleGuard>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AALA;;;;;AAOe,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;IAC/E,qBACI,+TAAC,mOAAS;QAAC,cAAc;YAAC;SAAQ;kBAC9B,cAAA,+TAAC,+OAAe;YACZ,MAAK;YACL,UAAU;gBACN;oBAAE,MAAM;oBAAU,OAAO;oBAAe,MAAM,gUAAe;gBAAC;gBAC9D;oBAAE,MAAM;oBAAmB,OAAO;oBAAgB,MAAM,8RAAK;gBAAC;gBAC9D;oBAAE,MAAM;oBAAuB,OAAO;oBAAgB,MAAM,2TAAW;gBAAC;gBACxE;oBAAE,MAAM;oBAAmB,OAAO;oBAAY,MAAM,oSAAO;gBAAC;gBAC5D;oBAAE,MAAM;oBAAqB,OAAO;oBAAc,MAAM,iSAAM;gBAAC;gBAC/D;oBAAE,MAAM;oBAAkB,OAAO;oBAAW,MAAM,8RAAK;gBAAC;aAC3D;YACD,UAAS;sBAER;;;;;;;;;;;AAIjB"}}]
}