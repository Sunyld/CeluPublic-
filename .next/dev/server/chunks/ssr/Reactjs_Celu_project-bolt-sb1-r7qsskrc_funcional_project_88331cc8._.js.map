{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/components/ui/dialog.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\nconst Dialog = DialogPrimitive.Root;\nconst DialogTrigger = DialogPrimitive.Trigger;\nconst DialogPortal = DialogPrimitive.Portal;\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-[101] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-1/2 top-1/2 z-[101] grid max-h-[calc(100%-4rem)] w-full -translate-x-1/2 -translate-y-1/2 gap-4 overflow-y-auto border bg-background p-6 shadow-lg shadow-black/5 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:max-w-[400px] sm:rounded-xl',\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-3 top-3 flex size-7 items-center justify-center rounded-lg opacity-60 transition-opacity hover:opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Fechar</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div className={cn('flex flex-col space-y-1.5 text-center sm:text-left', className)} {...props} />\n);\nDialogHeader.displayName = 'DialogHeader';\n\nconst DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn('flex flex-col-reverse gap-2 sm:flex-row sm:justify-end sm:gap-3', className)}\n    {...props}\n  />\n);\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn('text-lg font-semibold tracking-tight', className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,SAAS,2PAAoB;AACnC,MAAM,gBAAgB,8PAAuB;AAC7C,MAAM,eAAe,6PAAsB;AAC3C,MAAM,cAAc,4PAAqB;AAEzC,MAAM,8BAAgB,oSAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+TAAC,8PAAuB;QACtB,KAAK;QACL,WAAW,IAAA,mMAAE,EACX,6JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,8PAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,oSAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,+TAAC;;0BACC,+TAAC;;;;;0BACD,+TAAC,8PAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,mMAAE,EACX,yjBACA;gBAED,GAAG,KAAK;;oBAER;kCACD,+TAAC,4PAAqB;wBAAC,WAAU;;0CAC/B,+TAAC,kRAAC;gCAAC,WAAU;;;;;;0CACb,+TAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,8PAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,+TAAC;QAAI,WAAW,IAAA,mMAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;AAEhG,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA6C,iBACjF,+TAAC;QACC,WAAW,IAAA,mMAAE,EAAC,mEAAmE;QAChF,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,oSAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+TAAC,4PAAqB;QACpB,KAAK;QACL,WAAW,IAAA,mMAAE,EAAC,wCAAwC;QACrD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,4PAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,oSAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,+TAAC,kQAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,mMAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kQAA2B,CAAC,WAAW"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/components/shared/ConfirmDialog.tsx"],"sourcesContent":["import {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { AppButton } from '@/components/ui/app-button';\nimport { Loader2 } from 'lucide-react';\n\nexport interface ConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description: string;\n  confirmLabel?: string;\n  cancelLabel?: string;\n  onConfirm: () => void | Promise<void>;\n  destructive?: boolean;\n  loading?: boolean;\n}\n\n/**\n * Reusable confirmation dialog for destructive or important actions.\n * Supports async onConfirm; focus is managed by Radix Dialog.\n */\nexport function ConfirmDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  confirmLabel = 'Eliminar',\n  cancelLabel = 'Cancelar',\n  onConfirm,\n  destructive = true,\n  loading = false,\n}: ConfirmDialogProps) {\n  const handleConfirm = async () => {\n    console.log('[ConfirmDialog] handleConfirm chamado, onConfirm=', typeof onConfirm);\n    try {\n      await onConfirm();\n      console.log('[ConfirmDialog] onConfirm completou, fechando dialog');\n      onOpenChange(false);\n    } catch (err) {\n      console.error('[ConfirmDialog] onConfirm threw:', err);\n      throw err;\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={(newOpen) => {\n      if (!loading) {\n        onOpenChange(newOpen);\n      }\n    }}>\n      <DialogContent className=\"max-w-[calc(100vw-2rem)] sm:max-w-[400px]\" onPointerDownOutside={(e) => {\n        if (!loading) {\n          e.preventDefault();\n        }\n      }} onEscapeKeyDown={(e) => {\n        if (loading) {\n          e.preventDefault();\n        }\n      }}>\n        <DialogHeader>\n          <DialogTitle>{title}</DialogTitle>\n          <DialogDescription>{description}</DialogDescription>\n        </DialogHeader>\n        <DialogFooter className=\"gap-2 sm:gap-0\">\n          <AppButton\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={loading}\n          >\n            {cancelLabel}\n          </AppButton>\n          <AppButton\n            type=\"button\"\n            variant={destructive ? 'destructive' : 'default'}\n            onClick={handleConfirm}\n            disabled={loading}\n            className=\"gap-2\"\n          >\n            {loading && <Loader2 className=\"h-4 w-4 animate-spin\" />}\n            {confirmLabel}\n          </AppButton>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAQA;AACA;;;;;AAkBO,SAAS,cAAc,EAC5B,IAAI,EACJ,YAAY,EACZ,KAAK,EACL,WAAW,EACX,eAAe,UAAU,EACzB,cAAc,UAAU,EACxB,SAAS,EACT,cAAc,IAAI,EAClB,UAAU,KAAK,EACI;IACnB,MAAM,gBAAgB;QACpB,QAAQ,GAAG,CAAC,qDAAqD,OAAO;QACxE,IAAI;YACF,MAAM;YACN,QAAQ,GAAG,CAAC;YACZ,aAAa;QACf,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;QACR;IACF;IAEA,qBACE,+TAAC,sNAAM;QAAC,MAAM;QAAM,cAAc,CAAC;YACjC,IAAI,CAAC,SAAS;gBACZ,aAAa;YACf;QACF;kBACE,cAAA,+TAAC,6NAAa;YAAC,WAAU;YAA4C,sBAAsB,CAAC;gBAC1F,IAAI,CAAC,SAAS;oBACZ,EAAE,cAAc;gBAClB;YACF;YAAG,iBAAiB,CAAC;gBACnB,IAAI,SAAS;oBACX,EAAE,cAAc;gBAClB;YACF;;8BACE,+TAAC,4NAAY;;sCACX,+TAAC,2NAAW;sCAAE;;;;;;sCACd,+TAAC,iOAAiB;sCAAE;;;;;;;;;;;;8BAEtB,+TAAC,4NAAY;oBAAC,WAAU;;sCACtB,+TAAC,gOAAS;4BACR,MAAK;4BACL,SAAQ;4BACR,SAAS,IAAM,aAAa;4BAC5B,UAAU;sCAET;;;;;;sCAEH,+TAAC,gOAAS;4BACR,MAAK;4BACL,SAAS,cAAc,gBAAgB;4BACvC,SAAS;4BACT,UAAU;4BACV,WAAU;;gCAET,yBAAW,+TAAC,6SAAO;oCAAC,WAAU;;;;;;gCAC9B;;;;;;;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTOS/Reactjs/Celu/project-bolt-sb1-r7qsskrc/funcional/project/app/vendedor/%28dashboard%29/anuncios/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/components/providers/AuthProvider';\r\nimport { useApp } from '@/context/AppContext';\r\nimport { useToast } from '@/context/ToastContext';\r\nimport { Plus, Trash2, Edit, Package, Wrench, Eye, EyeOff, Loader2, RefreshCw } from 'lucide-react';\r\nimport { LIMITS, PLACEHOLDER_IMAGE } from '@/lib/constants';\r\nimport type { Ad } from '@/types';\r\nimport { AppButton } from '@/components/ui/app-button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { ConfirmDialog } from '@/components/shared/ConfirmDialog';\r\nimport { withTimeout } from '@/lib/errors';\r\n\r\nconst USE_SUPABASE = process.env.NEXT_PUBLIC_USE_SUPABASE === 'true';\r\nconst FETCH_TIMEOUT_MS = 12000;\r\nconst LOG_PREFIX = '[SELLER/ADS/DELETE]';\r\n\r\nconsole.log('[SELLER/ADS/PAGE] PATCH_LOADED v3', new Date().toISOString());\r\n\r\nexport default function SellerAdsList() {\r\n    const { user } = useAuth();\r\n    const { getAdsByUser, setAds, refreshAds } = useApp();\r\n    const showToast = useToast().showToast;\r\n    const [adToDelete, setAdToDelete] = useState<Ad | null>(null);\r\n    const [deletingId, setDeletingId] = useState<string | null>(null);\r\n    const [sellerAds, setSellerAds] = useState<Ad[] | null>(null);\r\n    const [loadingAds, setLoadingAds] = useState(false);\r\n    const adIdToDeleteRef = useRef<string | null>(null);\r\n\r\n    const loadSellerAds = useCallback(async () => {\r\n        if (!user || !USE_SUPABASE) return;\r\n        setLoadingAds(true);\r\n        try {\r\n            const r = await withTimeout(\r\n                fetch('/api/vendedor/anuncios', { cache: 'no-store' }),\r\n                FETCH_TIMEOUT_MS,\r\n                'Carregar anúncios'\r\n            );\r\n            const d = await r.json();\r\n            if (r.ok && Array.isArray(d.ads)) {\r\n                setSellerAds(d.ads);\r\n            } else {\r\n                setSellerAds(null);\r\n            }\r\n        } catch (e) {\r\n            showToast({ variant: 'error', description: e instanceof Error ? e.message : 'Erro ao carregar anúncios.' });\r\n            setSellerAds(null);\r\n        } finally {\r\n            setLoadingAds(false);\r\n        }\r\n    }, [user, showToast]);\r\n\r\n    useEffect(() => {\r\n        if (!user || !USE_SUPABASE) return;\r\n        setLoadingAds(true);\r\n        void loadSellerAds();\r\n    }, [user, USE_SUPABASE, loadSellerAds]);\r\n\r\n    const myAds = USE_SUPABASE && sellerAds !== null\r\n        ? sellerAds\r\n        : (user ? getAdsByUser(user.id) : []);\r\n    const products = myAds.filter((a) => a.type === 'product');\r\n    const services = myAds.filter((a) => a.type === 'service');\r\n    const canAddProduct = products.length < LIMITS.MAX_PRODUCTS;\r\n    const canAddService = services.length < LIMITS.MAX_SERVICES;\r\n\r\n    const handleConfirmDelete = useCallback(async () => {\r\n        const idToDelete = adToDelete?.id ?? adIdToDeleteRef.current;\r\n        console.log(LOG_PREFIX, 'handleConfirmDelete chamado adId=', idToDelete, 'adToDelete=', !!adToDelete, 'ref=', adIdToDeleteRef.current);\r\n        if (!idToDelete) {\r\n            console.warn(LOG_PREFIX, 'confirmado sem adId adToDelete=', !!adToDelete, 'ref=', adIdToDeleteRef.current);\r\n            setAdToDelete(null);\r\n            adIdToDeleteRef.current = null;\r\n            return;\r\n        }\r\n        console.log(LOG_PREFIX, 'confirmado no modal adId=', idToDelete);\r\n        setDeletingId(idToDelete);\r\n        showToast({ variant: 'info', description: 'A eliminar...' });\r\n\r\n        const url = `/api/vendedor/anuncios/${idToDelete}`;\r\n        const method = 'DELETE';\r\n        console.log(LOG_PREFIX, 'antes do fetch', { url, method, USE_SUPABASE });\r\n\r\n        const previousSellerAds = sellerAds ?? null;\r\n\r\n        try {\r\n            if (USE_SUPABASE) {\r\n                console.log(LOG_PREFIX, 'iniciando fetch DELETE para', url);\r\n                const r = await withTimeout(\r\n                    fetch(url, { method, cache: 'no-store', credentials: 'include' }),\r\n                    FETCH_TIMEOUT_MS,\r\n                    'Eliminar anúncio'\r\n                );\r\n                const d = await r.json().catch((err) => {\r\n                    console.error(LOG_PREFIX, 'erro ao parsear JSON:', err);\r\n                    return {};\r\n                });\r\n                console.log(LOG_PREFIX, 'resposta status=', r.status, 'body=', JSON.stringify(d));\r\n                if (!r.ok) {\r\n                    const errorMsg = typeof d.message === 'string' ? d.message : `Erro HTTP ${r.status}`;\r\n                    console.error(LOG_PREFIX, 'resposta não ok:', errorMsg);\r\n                    throw new Error(errorMsg);\r\n                }\r\n                console.log(LOG_PREFIX, 'sucesso! removendo do estado adId=', idToDelete);\r\n                setSellerAds((prev) => (prev ? prev.filter((a) => a.id !== idToDelete) : null));\r\n                setAds((prev) => prev.filter((a) => a.id !== idToDelete));\r\n                showToast({ variant: 'success', description: 'Anúncio apagado.' });\r\n                console.log(LOG_PREFIX, 'sucesso adId=', idToDelete);\r\n                void loadSellerAds();\r\n                void refreshAds();\r\n            } else {\r\n                console.log(LOG_PREFIX, 'modo local: removendo do estado adId=', idToDelete);\r\n                setAds((prev) => prev.filter((a) => a.id !== idToDelete));\r\n                showToast({ variant: 'success', description: 'Anúncio apagado.' });\r\n            }\r\n        } catch (e) {\r\n            const msg = e instanceof Error ? e.message : 'Erro ao eliminar.';\r\n            console.error(LOG_PREFIX, 'erro adId=', idToDelete, 'message=', msg, 'error=', e);\r\n            showToast({ variant: 'error', description: msg });\r\n            if (USE_SUPABASE && previousSellerAds) {\r\n                console.log(LOG_PREFIX, 'rollback: restaurando lista anterior');\r\n                setSellerAds(previousSellerAds);\r\n            }\r\n        } finally {\r\n            setDeletingId(null);\r\n            setAdToDelete(null);\r\n            adIdToDeleteRef.current = null;\r\n        }\r\n    }, [adToDelete, USE_SUPABASE, sellerAds, setAds, showToast, loadSellerAds, refreshAds]);\r\n\r\n    const setAdStatus = async (adId: string, status: 'published' | 'hidden') => {\r\n        try {\r\n            if (USE_SUPABASE) {\r\n                const r = await withTimeout(\r\n                    fetch(`/api/vendedor/anuncios/${adId}`, {\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ status }),\r\n                    }),\r\n                    FETCH_TIMEOUT_MS,\r\n                    'Atualizar estado'\r\n                );\r\n                if (!r.ok) {\r\n                    const d = await r.json().catch(() => ({}));\r\n                    throw new Error(d.message ?? 'Erro ao atualizar');\r\n                }\r\n                showToast({ variant: 'success', description: status === 'published' ? 'Anúncio publicado.' : 'Anúncio oculto.' });\r\n                await loadSellerAds();\r\n                await refreshAds();\r\n            } else {\r\n                setAds((prev) =>\r\n                    prev.map((a) =>\r\n                        a.id === adId ? { ...a, status, updatedAt: new Date().toISOString() } : a\r\n                    )\r\n                );\r\n            }\r\n        } catch (e) {\r\n            showToast({ variant: 'error', description: e instanceof Error ? e.message : 'Erro ao atualizar.' });\r\n        }\r\n    };\r\n\r\n    if (!user) return null;\r\n\r\n    if (USE_SUPABASE && loadingAds && sellerAds === null) {\r\n        return (\r\n            <div className=\"flex min-h-[40vh] flex-col items-center justify-center gap-4\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                <p className=\"text-sm text-muted-foreground\">A carregar anúncios...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (USE_SUPABASE && !loadingAds && sellerAds === null && user) {\r\n        return (\r\n            <div className=\"flex min-h-[40vh] flex-col items-center justify-center gap-4\">\r\n                <p className=\"text-sm text-muted-foreground\">Não foi possível carregar os anúncios.</p>\r\n                <AppButton variant=\"outline\" onClick={() => loadSellerAds()} className=\"gap-2\">\r\n                    <RefreshCw className=\"h-4 w-4\" />\r\n                    Tentar novamente\r\n                </AppButton>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderList = (list: Ad[], type: 'product' | 'service', canAdd: boolean) => (\r\n        <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                <CardTitle className=\"flex items-center gap-2 text-base\">\r\n                    {type === 'product' ? <Package className=\"h-4 w-4 text-primary\" /> : <Wrench className=\"h-4 w-4 text-primary\" />}\r\n                    {type === 'product' ? 'Produtos' : 'Serviços'} ({list.length}/{type === 'product' ? LIMITS.MAX_PRODUCTS : LIMITS.MAX_SERVICES})\r\n                </CardTitle>\r\n                {canAdd && (\r\n                    <AppButton variant=\"primary\" size=\"sm\" asChild className=\"gap-1\">\r\n                        <Link href={`/vendedor/anuncios/novo?tipo=${type}`}>\r\n                            <Plus className=\"h-4 w-4\" />\r\n                            Novo\r\n                        </Link>\r\n                    </AppButton>\r\n                )}\r\n            </CardHeader>\r\n            <CardContent>\r\n                <ul className=\"space-y-3\">\r\n                    {list.length === 0 ? (\r\n                        <li className=\"py-8 text-center text-sm text-muted-foreground\">Nenhum anúncio ainda.</li>\r\n                    ) : (\r\n                        list.map((ad) => (\r\n                            <li\r\n                                key={ad.id}\r\n                                className=\"flex items-center gap-3 rounded-xl border border-border p-3\"\r\n                            >\r\n                                <img\r\n                                    src={ad.images?.[0] || PLACEHOLDER_IMAGE}\r\n                                    alt=\"\"\r\n                                    loading=\"lazy\"\r\n                                    className=\"h-12 w-12 rounded-lg object-cover\"\r\n                                />\r\n                                <div className=\"min-w-0 flex-1\">\r\n                                    <Link\r\n                                        href={`/anuncio/${ad.id}`}\r\n                                        className=\"block truncate font-medium hover:underline text-foreground\"\r\n                                    >\r\n                                        {ad.title}\r\n                                    </Link>\r\n                                    <span className=\"text-sm text-muted-foreground\">\r\n                                        {ad.status === 'published' ? 'Publicado' : ad.status === 'hidden' ? 'Oculto' : 'Rascunho'}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    {ad.status !== 'published' && (\r\n                                        <AppButton variant=\"ghost\" size=\"icon\" title=\"Publicar\" onClick={() => setAdStatus(ad.id, 'published')}>\r\n                                            <Eye className=\"h-4 w-4\" />\r\n                                        </AppButton>\r\n                                    )}\r\n                                    {ad.status === 'published' && (\r\n                                        <AppButton variant=\"ghost\" size=\"icon\" title=\"Ocultar\" onClick={() => setAdStatus(ad.id, 'hidden')}>\r\n                                            <EyeOff className=\"h-4 w-4\" />\r\n                                        </AppButton>\r\n                                    )}\r\n                                    <AppButton variant=\"ghost\" size=\"icon\" asChild title=\"Editar\">\r\n                                        <Link href={`/vendedor/anuncios/editar/${ad.id}`}>\r\n                                            <Edit className=\"h-4 w-4\" />\r\n                                        </Link>\r\n                                    </AppButton>\r\n                                    <AppButton\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        className=\"text-destructive hover:bg-destructive/10\"\r\n                                        disabled={deletingId === ad.id}\r\n                                        onClick={() => {\r\n                                            console.log(LOG_PREFIX, 'clique Excluir adId=', ad.id);\r\n                                            adIdToDeleteRef.current = ad.id;\r\n                                            setAdToDelete(ad);\r\n                                        }}\r\n                                        title=\"Excluir\"\r\n                                    >\r\n                                        {deletingId === ad.id ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Trash2 className=\"h-4 w-4\" />}\r\n                                    </AppButton>\r\n                                </div>\r\n                            </li>\r\n                        ))\r\n                    )}\r\n                </ul>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6\" data-testid=\"patch-loaded\">\r\n            <div className=\"sr-only\">PATCH_LOADED v3</div>\r\n            <ConfirmDialog\r\n                open={!!adToDelete}\r\n                onOpenChange={(open) => {\r\n                    if (!open) {\r\n                        setAdToDelete(null);\r\n                        adIdToDeleteRef.current = null;\r\n                    }\r\n                }}\r\n                title=\"Excluir anúncio\"\r\n                description=\"Tem certeza que deseja excluir este anúncio? Esta ação não pode ser desfeita.\"\r\n                confirmLabel=\"Eliminar\"\r\n                cancelLabel=\"Cancelar\"\r\n                onConfirm={handleConfirmDelete}\r\n                destructive\r\n                loading={deletingId !== null}\r\n            />\r\n            <div>\r\n                <h1 className=\"text-2xl font-bold text-foreground\">Meus anúncios</h1>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    Gerir os seus anúncios publicados e rascunhos.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n                {renderList(products, 'product', canAddProduct)}\r\n                {renderList(services, 'service', canAddService)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}